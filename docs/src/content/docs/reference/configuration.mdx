---
title: Configuring EC-Twoslash
description: Learn how to configure Twoslash with Expressive Code.
sidebar:
  order: 1
  label: Configuration
tableOfContents:
  minHeadingLevel: 2
  maxHeadingLevel: 5
---

import { Aside } from '@astrojs/starlight/components';
import PropertySignature from '../../../components/PropertySignature.astro';

Expressive Code Twoslash (EC-Twoslash) is highly configurable, allowing you to tailor its behavior to fit your specific needs. This section provides an overview of the various configuration options available, including how to customize the appearance of code blocks, enable or disable specific features, and integrate with other tools.

**Example Configuration:**

```ts twoslash title="ec.config.mjs"
import { defineEcConfig } from 'astro-expressive-code';
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [ecTwoSlash()],
});
```

<Aside>
For all examples in this section, we will be using the `ec.config.mjs` file to demonstrate how to configure EC-Twoslash. For more information about this configuration file, see the [Expressive Code documentation](https://expressive-code.com/reference/configuration/).
</Aside>

## Configuration Options

### instanceConfigs

<PropertySignature>
- Type: {}
</PropertySignature>

The `instanceConfigs` option allows for configuring the included twoslasher instances. This is useful for customizing the behavior of specific Twoslash instances based on the trigger and language. For example, you can configure one instance to handle TypeScript code blocks and another instance to handle Vue code blocks, each with its own set of options and transformations.

#### twoslash

##### explicitTrigger

<PropertySignature>
- Type: boolean | RegExp
- Default: `true`
</PropertySignature>

The `explicitTrigger` option determines how EC-Twoslash identifies which code blocks should be processed with Twoslash transformations. When set to `true`, EC-Twoslash will only process code blocks that contain an explicit trigger annotation (e.g., `// @twoslash` for JavaScript/TypeScript). When set to a regular expression, EC-Twoslash will use the provided regex to match against the content of the code blocks to determine if they should be processed. If set to `false`, EC-Twoslash will process all code blocks of the specified languages without requiring any trigger annotations.

##### languages

<PropertySignature>
- Type: `ReadonlyArray<string>`
- Default: `["ts", "tsx", "vue"]`
</PropertySignature>

##### Example

```ts twoslash title="ec.config.mjs" {8-11}
import { defineEcConfig } from "@astrojs/starlight/expressive-code";
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [
    ecTwoSlash({
      instanceConfigs: {
        twoslash: {
          explicitTrigger: true,
          languages: ["ts", "tsx", "vue"],
        },
      },
    }),
  ],
});
```

#### eslint

For configuring the `eslint` Twoslasher instance, the options are the same as for the `twoslash` instance, but they will only apply to code blocks that match the trigger and language specified for the `eslint` instance. For example, you can configure the `eslint` instance to only process TypeScript code blocks that contain an `eslint` trigger annotation.

##### explicitTrigger

<PropertySignature>
- Type: boolean | RegExp
- Default: `true`
</PropertySignature>

##### languages

<PropertySignature>
- Type: `ReadonlyArray<string>`
- Default: `["ts", "tsx"]`
</PropertySignature>

##### Example

```ts twoslash title="ec.config.mjs" {8-11}
import { defineEcConfig } from "@astrojs/starlight/expressive-code";
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [
    ecTwoSlash({
      instanceConfigs: {
        eslint: {
          explicitTrigger: true,
          languages: ["ts", "tsx"],
        },
      },
    }),
  ],
});
```

### includeJsDoc

<PropertySignature>
- Type: boolean
- Default: `true`
</PropertySignature>

The `includeJsDoc` option determines whether JSDoc comments should be included in the hover information provided by EC-Twoslash. When set to `true`, EC-Twoslash will include JSDoc comments in the hover popup, providing additional context and documentation for the code being hovered over. If set to `false`, JSDoc comments will be excluded from the hover information, resulting in a more concise hover popup that only includes type information and other relevant details.

#### Example

```ts twoslash title="ec.config.mjs" {7}
import { defineEcConfig } from 'astro-expressive-code';
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [
    ecTwoSlash({
      includeJsDoc: false, // Exclude JSDoc comments from hover information
    }),
  ],
});
```

### allowNonStandardJsDocTags

<PropertySignature>
- Type: boolean
- Default: `true`
</PropertySignature>

The `allowNonStandardJsDocTags` option determines whether non-standard JSDoc tags should be included in the hover information provided by EC-Twoslash. When set to `true`, EC-Twoslash will include non-standard JSDoc tags in the hover popup, allowing you to see custom documentation that may not be part of the standard JSDoc specification. If set to `false`, only standard JSDoc tags will be included in the hover information, resulting in a more streamlined hover popup that focuses on commonly used documentation tags.

#### Example

```ts twoslash title="ec.config.mjs" {7}
import { defineEcConfig } from 'astro-expressive-code';
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [
    ecTwoSlash({
      allowNonStandardJsDocTags: false, // Exclude non-standard JSDoc tags from hover information
    }),
  ],
});
```

### twoslashOptions

<PropertySignature>
- Type: TwoslashOptions
- Default: `{}`
</PropertySignature>

The `twoslashOptions` option allows you to forward additional options directly to the `twoslash` preprocessor. This is useful for customizing the behavior of Twoslash itself, such as enabling specific features, configuring how code is processed, or adjusting the output of Twoslash transformations. For a full list of available options that can be forwarded to Twoslash, see the [Twoslash documentation](https://twoslash.netlify.app/refs/options).

```ts twoslash title="ec.config.mjs" {7-9}
import { defineEcConfig } from 'astro-expressive-code';
import ecTwoSlash from "expressive-code-twoslash";

export default defineEcConfig({
  plugins: [
    ecTwoSlash({
      twoslashOptions: {
        // Twoslash options go here
      },
    }),
  ],
});
```

### twoslashVueOptions

<PropertySignature>
- Type: [VueSpecificTwoslashOptions](#vuespecifictwoslashoptions)
- Default: `{}`
</PropertySignature>

Options to forward to `twoslash-vue`.

This option is only used if the `vue` language is included in the `languages` option and will be ignored otherwise. It allows you to customize the behavior of the `twoslash-vue` preprocessor, which is responsible for handling Vue-specific features in EC-Twoslash. For a full list of available options that can be forwarded to `twoslash-vue`, see the [Twoslash Vue documentation](https://twoslash.netlify.app/refs/vue-options).

### twoslashEslintOptions

<PropertySignature>
- Type: [CreateTwoslashESLintOptions](#createtwoslashelsintoptions)
- Default: `{}`
</PropertySignature>

Options to forward to `twoslash-eslint`.

This option is only used if the `eslint` instance is configured in the `instanceConfigs` option and will be ignored otherwise. It allows you to customize the behavior of the `twoslash-eslint` preprocessor, which is responsible for handling ESLint-specific features in EC-Twoslash. For a full list of available options that can be forwarded to `twoslash-eslint`, see the [Twoslash ESLint documentation](https://twoslash.netlify.app/packages/eslint#usage-with-shiki).

## Type References

### VueSpecificTwoslashOptions

The `VueSpecificTwoslashOptions` type represents the options that can be forwarded to `twoslash-vue`, excluding the standard Twoslash options. This type is derived by omitting the keys of `TwoslashOptions` from `CreateTwoslashVueOptions`, ensuring that only Vue-specific options are included.

```ts
type VueSpecificTwoslashOptions = {
    debugShowGeneratedCode?: boolean;
    vueCompilerOptions?: Partial<RawVueCompilerOptions>;
}
```

### CreateTwoslashESLintOptions

The `CreateTwoslashESLintOptions` type represents the options that can be forwarded to `twoslash-eslint`, excluding the standard Twoslash options. This type is derived by omitting the keys of `TwoslashOptions` from `CreateTwoslashESLintOptions`, ensuring that only ESLint-specific options are included.

```ts
type CreateTwoslashESLintOptions = {
    /**
     * Flat configs for ESLint
     */
    eslintConfig: Linter.FlatConfig[];
    /**
     * Custom code transform before sending to ESLint for verification
     *
     * This does not affect the code rendering
     */
    eslintCodePreprocess?: (code: string) => string;
    /**
     * The current working directory for ESLint
     */
    cwd?: string;
    /**
     * Include the parsed docs in the result
     *
     * @default true
     */
    includeDocs?: boolean;
    /**
     * Merge error messages that has same range
     * @default true
     */
    mergeMessages?: boolean;
}
```